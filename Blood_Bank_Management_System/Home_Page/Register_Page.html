<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blood Bank Management System</title>
    <!-- Add this line inside the <head> tag -->

    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <header>
      <div id="WelcomeMessage" style="display: none">Welcome,abord</div>
      <div id="top">
        <img
          id="logo"
          src="/Blood_Bank_Management_System/images/blood_logo.png"
          alt="Error"
        />

        <div id="heading">
          <h1>Blood Bank Management System</h1>
          <h2>Government of West Bengal</h2>
        </div>

        <img
          id="wb_logo"
          src="/Blood_Bank_Management_System/images/wb_logo.png"
          alt="Error"
        />
      </div>
      <div id="title_bar">
        <ul id="title">
          <a href="">Home</a>
          <a href="">Dashboard</a>
          <a href="">Contact Us</a>
          <a href="">Manual</a>
          <a
            href="http://localhost/Blood_Bank_Management_System/Profile_Creation/registration.html"
            >Register</a
          >
        </ul>
        <div id="search">
          <input type="text" id="searchBar" placeholder="Search..." />

          <button id="goButton" onclick="performSearch()">Go</button>
        </div>
      </div>
    </header>
    <main>
      <div class="slider-frame">
        <img src="" id="image" height="340" width="600" alt="" />
      </div>

      <div class="login-container">
        <h2>Login</h2>

        <form form onsubmit="return handleLogin()">
          <label for="username">Username:</label>
          <input type="text" id="username" name="username" required />

          <label for="password">Password:</label>
          <input type="password" id="password" name="password" required />

          <button type="submit" id="login-button" >
            Login
          </button>
        </form>
      </div>
    </main>
    <div id="features">
      <div class="icons">
        <i class="fa-solid fa-building fa-xl"></i>
        <a href="">Search Blood Banks</a>
      </div>
      <div class="icons">
        <i class="fa-solid fa-person fa-xl"></i>
        <a href="">Search Donors</a>
      </div>
      <div class="icons">
        <i class="fa-solid fa-droplet fa-xl"></i>
        <a href="">Search Blood Groups</a>
      </div>
      <div class="icons">
        <i class="fa-regular fa-registered fa-xl"></i>
        <a href="">Donor Registration</a>
      </div>
    </div>
    <div id="add">
      <img src="/Blood_Bank_Management_System/images/donationFact.jpg" alt="" />
      <div class="col-md-4">
        <table class="table table-bordered" id="bldgrp">
          <tbody>
            <tr>
              <th colspan="3" style="color: white; background-color: red">
                Compatible Blood Type Donors
              </th>
            </tr>
            <tr>
              <td><b>Blood Type</b></td>
              <td><b>Donate Blood To</b></td>
              <td><b>Receive Blood From</b></td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>A+</b></span>
              </td>
              <td>A+ AB+</td>
              <td>A+ A- O+ O-</td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>O+</b></span>
              </td>
              <td>O+ A+ B+ AB+</td>
              <td>O+ O-</td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>B+</b></span>
              </td>
              <td>B+ AB+</td>
              <td>B+ B- O+ O-</td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>AB+</b></span>
              </td>
              <td>AB+</td>
              <td>Everyone</td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>A-</b></span>
              </td>
              <td>A+ A- AB+ AB-</td>
              <td>A- O-</td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>O-</b></span>
              </td>
              <td>O-</td>
              <td>O-</td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>B-</b></span>
              </td>
              <td>B+ B- AB+ AB-</td>
              <td>B- O-</td>
            </tr>
            <tr>
              <td>
                <span style="color: #961e1b"><b>AB-</b></span>
              </td>
              <td>AB+ AB-</td>
              <td>AB- A- B- O-</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <footer>
      <div id="footer">
        <p>
          Copyright Â© 2024,Designed & Developed by Soutik Mondal, Dept. of CSE,
          University of Calcutta. All Rights Reserved.
        </p>
      </div>
    </footer>

    <script>
      // function redirectTo(page) {
      //   window.location.href = page;
      // }
      function handleLogin() {
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;

        if (username.trim() === "" || password.trim() === "") {
          document.getElementById("errorMessage").innerHTML =
            "Please enter both username and password.";
        } 
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var response = JSON.parse(xhr.responseText);

                    if (response.success) {
                        // Hide the login form
                        document.getElementById("login-container").style.display = "none";

                        // Show the content section
                        document.getElementById("WelcomeMessage").style.display = "block";

                        // Change the welcome message
                        changeWelcomeMessage(username);
                    } else {
                        // Handle authentication failure, show error message or take appropriate action
                        alert("Authentication failed. Please check your credentials.");
                    }
                }
            };

            xhr.open("POST", "login_process.php", true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.send("username=" + username + "&password=" + password);

            // Prevent form submission (so the page doesn't refresh)
            return false;
      }

      function changeWelcomeMessage(username) {
            var welcomeMessage = document.getElementById("welcomeMessage");
            welcomeMessage.textContent = "Welcome, " + username + "!";
        }
      function show_alert() {
        alert("Successfully logged in");
      }

// Slide Show

      let image = document.getElementById("image");
      let images = [
        "/Blood_Bank_Management_System/images/2.png",
        "/Blood_Bank_Management_System/images/3 .jpg",
        "/Blood_Bank_Management_System/images/4 .jpg",
      ];
      setInterval(function () {
        let random = Math.floor(Math.random() * 3);
        image.src = images[random];
      }, 1000);
    </script>
  </body>
</html>
